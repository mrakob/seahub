{% load i18n %}

<script type="text/template" id="side-nav-tmpl">
    <h3 class="hd">{% trans "System Admin" %}</h3>
    <ul class="side-tabnav-tabs">
        <li class="tab <% if (cur_tab == 'dashboard') { %> tab-cur<% } %>">
            <a href="{{ SITE_ROOT }}sysadmin/#dashboard/"><span class="sf2-icon-wrench"></span>{% trans "Info" %}</a>
        </li>
        <li class="tab <% if (cur_tab == 'devices') { %> tab-cur<% } %>"> <a href="{{ SITE_ROOT }}sysadmin/#admin-all-devices/"><span class="sf2-icon-monitor"></span>{% trans "Devices" %}</a>
        </li>
        <li class="tab">
            <a href="{% url "sys_settings" %}"><span class="sf2-icon-cog2"></span>{% trans "Settings" %}</a>
        </li>
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/seafadmin/"><span class="sf2-icon-library"></span>{% trans "Libraries" %}</a>
        </li>
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/useradmin/"><span class="sf2-icon-user"></span>{% trans "Users" %}</a>
        </li>
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/groupadmin/"><span class="sf2-icon-group"></span>{% trans "Groups" %}</a>
        </li>
        {% if multi_tenancy %}
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/orgadmin/"><span class="sf2-icon-organization"></span>{% trans "Organizations" %}</a>
        </li>
        {% endif %}
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/notificationadmin/"><span class="sf2-icon-msgs"></span>{% trans "Notifications" %}</a>
        </li>
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/publinkadmin/"><span class="sf2-icon-link"></span>{% trans "Links" %}</a>
        </li>
        {% if traffic_stats_enabled %}
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/trafficadmin/"><span class="sf2-icon-histogram"></span>{% trans "Traffic" %}</a>
        </li>
        {% endif %}
        {% if sysadmin_extra_enabled %}
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/loginadmin/"><span class="sf2-icon-clock"></span>{% trans "Logs" %}</a>
        </li>
        {% endif %}
        {% if events_enabled %}
        <li class="tab">
            <a href="{{ SITE_ROOT }}sys/virus_scan_records/"><span class="sf2-icon-security"></span>{% trans "Virus Scan" %}</a>
        </li>
        {% endif %}
    </ul>
</script>

<script type="text/template" id="sysinfo-tmpl">
    <div class="header-bar">
        <h3 class="">{% trans "Info" %}</h3>
    </div>
    <dl>
        <dt>{% trans "System Info" %}</dt>
        <dd><% if (is_pro) { %>
                {% trans "Professional Edition" %}
                <% if (with_license) { %>
                    {% trans "expires on" %} <%- license.Expiration %>
                <% } %>
            <% } else { %>
            {% trans "Community Edition" %}
            <a href="http://manual.seafile.com/deploy_pro/migrate_from_seafile_community_server.html" target="_blank">{% trans "Upgrade to Pro Edition" %}</a>
            <% } %>
        </dd>

        <dt>{% trans "Libraries" %}</dt>
        <dd><%- repos_count %></dd>

        <% if (is_pro) { %>
        <dt>{% trans "Active Users" %} / {% trans "Total Users" %} / {% trans "Limits" %}</dt>
        <dd>
            <%- active_users_count %>
            /
            <%- users_count %>
            /
            <% if (with_license) { %>
                <%- license.MaxUsers %>
            <% } else { %>
                --
            <% } %>
        </dd>
        <% } else { %>
        <dt>{% trans "Active Users" %} / {% trans "Total Users" %}</dt>
        <dd>
            <%- active_users_count %>
            /
            <%- users_count %>
        </dd>
        <% } %>

        <dt>{% trans "Groups" %}</dt>
        <dd><%- groups_count %></dd>

        <% if (multi_tenancy_enabled) { %>
        <dt>{% trans "Organizations" %}</dt>
        <dd><%- org_count %></dd>
        <% } %>

    </dl>
</script>

<script type="text/template" id="admin-devices-tmpl">
    <div class="hd">
        <ul class="tab-tabs-nav fleft">
            <li class="tab <% if (cur_tab == 'devices') { %> ui-state-active <% } %>"><a href="#admin-all-devices/" class="a">{% trans "All" %}</a></li>
            <li class="tab <% if (cur_tab == 'errors') { %> ui-state-active <% } %>"><a href="#admin-device-errors/" class="a">{% trans "Errors" %}</a></li>
        </ul>
    </div>
    <table>
        <thead>
            <tr>
                <th width="22%">{% trans "User" %}</th>
                <th width="15%">{% trans "Platform" %}</th>
                <th width="18%">{% trans "Device Name" %}</th>
                <th width="15%">{% trans "IP" %}</th>
                <th width="15%">{% trans "Last Access" %}</th>
                <th width="10%">{% trans "# Libraries" %}</th>
                <th width="5%"></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div id="paginator">
        <a class="paginator-previous hide" href="#">{% trans "Previous" %}</a>
        <a class="paginator-next hide" href="#">{% trans "Next" %}</a>
    </div>
    <span class="loading-icon loading-tip"></span>
    <div class="empty-tips hide">
        <h2 class="alc">{% trans "You do not have connected devices" %}</h2>
        <p>{% trans "Your clients (Desktop/Android/iOS) will be listed here." %}</p>
    </div>
</script>

<script type="text/template" id="admin-device-item-tmpl">
    <td><%- user %></td>
    <td><%- platform %> <%- client_version %></td>
    <td><%- device_name %></td>
    <td><%- last_login_ip %></td>
    <td><time title='<%- time %>'><%- time_from_now %></time></td>
    <td class="popover-container">
    </td>
    <td>
        <div>
            <span class="unlink-device op-icon sf2-icon-delete vh" title="{% trans "Unlink" %}"></span>
        </div>
    </td>
</script>

<script type="text/template" id="admin-device-errors-tmpl">
    <div class="hd">
        <ul class="tab-tabs-nav fleft">
            <li class="tab <% if (cur_tab == 'devices') { %> ui-state-active <% } %>"><a href="#admin-all-devices/" class="a">{% trans "All" %}</a></li>
            <li class="tab <% if (cur_tab == 'errors') { %> ui-state-active <% } %>"><a href="#admin-device-errors/" class="a">{% trans "Errors" %}</a></li>
        </ul>
    </div>
    <table>
        <thead>
            <tr>
                <th width="15%">{% trans "User" %}</th>
                <th width="15%">{% trans "IP" %}</th>
                <th width="15%">{% trans "Device" %}</th>
                <th width="15%">{% trans "Library" %}</th>
                <th width="20%">{% trans "Error" %}</th>
                <th width="20%">{% trans "Time" %}</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div class="empty-tips hide">
        <h2 class="alc">{% trans "Not library sync errors" %}</h2>
    </div>
    <span class="loading-icon loading-tip"></span>
    <p class="error hide"></p>
</script>

<script type="text/template" id="admin-device-error-tmpl">
    <td>
        <a href="{{ SITE_ROOT }}useradmin/info/<%- email %>/"><%- email %></a>
    </td>
    <td><%- peer_ip %>
    <td><%- peer_name %></td>
    <td>
        <a href="{{ SITE_ROOT }}sys/seafadmin/repo/<%- repo_id %>/"><%- repo_name %></a>
    </td>
    <td><%- error_con %></td>
    <td><time title='<%- time %>'><%- time_from_now %></time></td>
</script>
